varying vec4 projCoord;
uniform vec3 lLightPos;

void main()
{
  projCoord = gl_TextureMatrix[0] * gl_Vertex;

  vec3 lLightDir = normalize(lLightPos - gl_Vertex.xyz);
  gl_FrontColor = dot(lLightDir, gl_Normal) * gl_Color;
  
#ifdef FORCE_2D_POSITION
  gl_Position = vec4(gl_MultiTexCoord7.x,gl_MultiTexCoord7.y,0.5,1);
#else
  gl_Position = ftransform();
#endif
}
